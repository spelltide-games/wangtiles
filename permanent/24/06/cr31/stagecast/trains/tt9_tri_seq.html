<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/trains.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceBeginEditable name="doctitle" -->
<title>Triangular Number Sequence</title>
<!-- InstanceEndEditable -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- #BeginEditable "Meta" -->
<link rel="stylesheet" href="../trains/text.css" type="text/css">
<script src="../js/trains.js" type="text/JavaScript"></script>
<script src="../js/trains_tns.js" type="text/JavaScript"></script>
<meta name="description" content="Turing trains, computational, traintrack layouts">
<meta name="keywords" content="Turing, computational, logic, mechanical computer, mechanical logic, traintrack, layout, Duplo points, logic gates, plans">
<!-- #EndEditable -->
</head>

<body>
<table class="tabs">
	<tr>
		<td>
			<p>
				⚠️This site is a mirror of <a href="http://www.cr31.co.uk/stagecast">Guy Walker's Stagecast</a>⚠️
			</p>
		</td>
	</tr>
</table>
<table cellspacing="0" cellpadding="0" class="tabs">
	<tr>
		<td class="main"><p>Turing Trains | <a href="../../iso/iso.html">Isometric</a> | <a href="../wang/intro.html">Wang Tiles</a> | <a href="../wang/stage.html">Maze Arrays</a> | <a href="../../logojs/logo.html">i Logo</a></p></td>
		<td class="side"><p><a href="../../index.html">HOME</a></p></td>
	</tr>
</table>
<table cellspacing="0" cellpadding="0" class="head">
	<tr>
		<td class="main"><h1>Turing Trains</h1></td>
		<td class="side">&nbsp;</td>
	</tr>
</table>
<table cellspacing="0" cellpadding="0" class="strap">
	<tr>
		<td class="main"><p>computational train track layouts</p></td>
		<td class="side"><p>menu</p></td>
	</tr>
</table>
<table cellspacing="0" cellpadding="0" class="cont">
	<tr>
		<td class="main"><div class="content"><!-- InstanceBeginEditable name="contents" -->
		<h2>Triangular Number Sequence</h2>
				<table cellpadding="0" cellspacing="0" class="lout">
					<tr>
						<td><p>The triangular numbers follow the arithmetic sequence 0, 1, 3, 6, 10, 15... where each term increases by the count value 1, 2, 3...etc.</p>
							<p>The concept dates back to the 5th century BC. Each term is given by the formulae n(n+1)/2. So for example the fourth triangular number is 4(4+1)/2 =10. More information on the Triangular Numbers at <a href="https://en.wikipedia.org/wiki/Triangular_number">Wikipedia</a>.</p></td>
						<td><table cellpadding="0" cellspacing="0" class="tab">
							<tr class="tabtop">
								<td>Count<br>
									n</td>
								<td>Count<br>
									+&nbsp;Sum </td>
								<td> new Sum </td>
							</tr>
							<tr>
								<td>0<br>
									1<br>
									2<br>
									3<br>									4<br>
									5<br>
									6<br>
									7</td>
								<td>0&nbsp;+&nbsp;0<br>
									1&nbsp;+&nbsp;0<br>
									2&nbsp;+&nbsp;1<br>
									3&nbsp;+&nbsp;3<br>									4&nbsp;+&nbsp;6<br>
									5&nbsp;+&nbsp;10<br>
									6&nbsp;+&nbsp;15<br>
									7&nbsp;+&nbsp;21</td>
								<td>0<br>
									1<br>
									3<br>
									6<br>									10<br>
									15<br>
									21<br>
									28</td>
							</tr>
						</table></td>
					</tr>
				</table>
				<p>We need 3 registers:</p>
				<ol>
					<li>An Input register, set to the n<sup>th</sup> term required. (<strong>n</strong>)</li>
					<li>A Count register incremented with each cycle. (<strong>C</strong>)</li>
					<li>A Sum register to hold the accumulating sum. (<strong>S</strong>)</li>
				</ol>
				<p>The operator sets all registers to <strong>0</strong> and the Input register to the n<sup>th</sup> term required. The train needs to carry out the following steps:</p>
				<ol>
					<li>Compare the Count with n (the n<sup>th</sup> term requested).</li>
					<li>If the Count is equal to (or greater than) <strong>n</strong>, then Halt<br>
						- we're done, the sum will be showing in the Sum Register ...else...</li>
					<li>Increment the Count register (increase by 1).</li>
					<li>Add the Count to the Sum register, producing the next triangular number.</li>
					<li>Loop back to the first step.</li>
				</ol>
				<p><strong>Note:</strong></p>
				<ul>
					<li>We cannot simply check if Count and <strong>n</strong> are equal. Because if <strong>n</strong> is set below the current Count, the layout will carry on computing until a register overflows. The Count will increment but never equal <strong>n</strong> to halt the train. Therefore the comparator checks if the Count is equal to <em>or greater than</em> <strong>n</strong>.</li>
					<li>We need to compare first in case we are asked for the 0<sup>th</sup> term (or more likely forgot to set register <strong>n</strong>). This needs to produce a Sum of 0.</li>
					<li>As we only need to continue if the Count is less than <strong>n</strong>, we can remove one lazy point from the comparator.</li>
				</ul>
				<p>The circuit is constructed from three functions. An upper <a href="tt2_func_linked.html#comp">Comparator</a>, a central <a href="tt2_func_single.html#inc">Count Up</a> (Incrementor) and a lower <a href="tt2_func_single.html#add">Adder</a>.<br>
				</p>
				<table cellpadding="0" cellspacing="0" class="play" id="tns_bg">
					<caption>
					Layout to calculate Triangular Numbers
					</caption>
					<tr>
						<td><img src="grab/tt9/tri.png" alt="triangular number series layout" width="608" height="544" onclick="swit('tns_999')">
							<div class="sprites">
								<textarea id="tns_tens1" readonly></textarea>
								<textarea id="tns_tens2" readonly></textarea>
								<textarea id="tns_tens3" readonly></textarea>
								<img src="loco/10s.gif" alt="" width="32" height="32" id="tns_0" onclick="swit(this.id)">
								<img src="point_/13y_1.gif" alt="" width="32" height="32" id="tns_1" onclick="swit(this.id)">
								<img src="point_/13y_1.gif" alt="" width="32" height="32" id="tns_2" onclick="swit(this.id)">
								<img src="point_/13y_1.gif" alt="" width="32" height="32" id="tns_3" onclick="swit(this.id)">
								<img src="point_/13y_1.gif" alt="" width="32" height="32" id="tns_4" onclick="swit(this.id)">
								<img src="point_/13y_1.gif" alt="" width="32" height="32" id="tns_5" onclick="swit(this.id)">
								<img src="point_/7y_1.gif" alt="" width="32" height="32" id="tns_6" onclick="swit(this.id)">
								<img src="point_/7y_1.gif" alt="" width="32" height="32" id="tns_7" onclick="swit(this.id)">
								<img src="point_/13y_1.gif" alt="" width="32" height="32" id="tns_8" onclick="swit(this.id)">
								<img src="point_/13y_1.gif" alt="" width="32" height="32" id="tns_9" onclick="swit(this.id)">
								<img src="point_/7y_1.gif" alt="" width="32" height="32" id="tns_10" onclick="swit(this.id)">
								<img src="point_/7y_1.gif" alt="" width="32" height="32" id="tns_11" onclick="swit(this.id)">
								<img src="point_/13y_1.gif" alt="" width="32" height="32" id="tns_12" onclick="swit(this.id)">
								<img src="point_/7y_1.gif" alt="" width="32" height="32" id="tns_13" onclick="swit(this.id)">
								<img src="point_/7y_1.gif" alt="" width="32" height="32" id="tns_14" onclick="swit(this.id)">
								<img src="point_/7y_1.gif" alt="" width="32" height="32" id="tns_15" onclick="swit(this.id)">
								<img src="point_/7y_1.gif" alt="" width="32" height="32" id="tns_16" onclick="swit(this.id)">
								<img src="point_/7y_1.gif" alt="" width="32" height="32" id="tns_17" onclick="swit(this.id)">
								<img src="point_/7y_1.gif" alt="" width="32" height="32" id="tns_18" onclick="swit(this.id)">
								<img src="point_/7y_1.gif" alt="" width="32" height="32" id="tns_19" onclick="swit(this.id)">
								<img src="point_/13s_1.gif" alt="" width="32" height="32" id="tns_20" onclick="swit(this.id)">
								<img src="point_/13s_1.gif" alt="" width="32" height="32" id="tns_21" onclick="swit(this.id)">
								<img src="loco/4.gif" alt="" width="32" height="32" id="tns_loco">
								<img src="loco/over.gif" alt="" width="36" height="36" id="tns_over">
							</div></td>
					</tr>
				</table><!-- #BeginLibraryItem "/Library/interactive.lbi" --><table cellpadding="0" cellspacing="0" class="ii">
	<tr>
		<td>Click layout to pause/run train</td>
		<td>Click points to switch 0/1</td>
		<td>Click start circle to reset train/points</td>
	</tr>
</table>
<!-- #EndLibraryItem --><!-- #BeginLibraryItem "/Library/points.lbi" --><table cellpadding="0" cellspacing="0" class="ji">
	<tr>
		<td><img src="extra/7y_0.gif" alt="lazy point" width="32" height="32"></td>
		<td>Lazy points switch between upper <strong>0</strong> or lower <strong>1</strong> branch lines<br>
			Trains arriving on a branch line switch the point to that line</td>
	</tr>
	<tr>
		<td><img src="track/11a.gif" alt="sprung point" width="32" height="32"></td>
		<td>Sprung points allow branch line trains to join the main line<br>
			All main line trains go straight ahead and never 'branch off'</td>
	</tr>
</table><!-- #EndLibraryItem --><h3>Operation:</h3>
				<ol>
					<li>Clear both <strong>C</strong>ount and <strong>S</strong>um registers.</li>
					<li>Set register <strong>n</strong> to n<sup>th</sup> term required.</li>
					<li>Start the train running from the station.</li>
					<li>When the train returns to platform 1 and halts, the n<sup>th</sup> triangular number is shown in the lower <strong>S</strong>um register.</li>
					<li>If the train returns and halts at platform 0 then an overflow error of either the <strong>C</strong>ount or <strong>S</strong>um registers has occoured.</li>
					<li>To calculate a higher term, just increase <strong>n</strong> and restart the train. No need to clear registers and start again from the beginning.</li>
				</ol>
				<p>To calculate partial triangular numbers, for instance 5+6+7, set <strong>n</strong> to 7 and <strong>C</strong> to 4 (one less than the first number).</p>
				<p>To calculate higher triangular numbers, registers can be extended to the left indefinitely. A 4 stage <strong>n</strong> register will allow the 15th triangular number of 120 to be calculated if the Sum register is extended to 7 stages.</p>
		<!-- InstanceEndEditable --><!-- end .content --></div></td>
		<td class="side"><ul>
				<li><strong><a href="tt0_int.html">Intro</a></strong></li>
				<li><a href="tt0_intro.html">Train &amp; Track</a></li>
				<li><a href="tt1_points.html">Lazy Points</a></li>
				<li><a href="tt1_subs.html">Sprung Points</a></li>
				<li><strong><a href="tt2_func.html">Functions</a></strong></li>
				<li><a href="tt2_func_single.html">Single Point</a></li>
				<li><a href="tt2_func_linked.html">Linked Points</a></li>
				<li><a href="tt2_func_compo.html">Compound</a></li>
				<li><a href="tt2_func_shift.html">Shift &amp; Rotate</a></li>
				<li><a href="tt2_func_flipflop.html">Flip-flops</a></li>
				<li><a href="tt2_func_gates.html">Logic Gates</a></li>
				<li><strong><a href="tt9_lout.html">Layouts</a></strong></li>
				<li><a href="tt9_ramp.html">Count Up/Down</a></li>
				<li><a href="tt9_follower.html">Input Follower</a></li>
				<li><a href="tt9_ham.html">Hamming Weight</a></li>
				<li><a href="tt9_addsub.html">Add/Subtract</a></li>
				<li><a href="tt9_tri_num.html">Triangle Num</a></li>
				<li><a href="tt9_tri_seq.html">Triangle Seq</a></li>
				<li><a href="tt9_multi.html">Multiply</a></li>
				<li><a href="tt9_divide.html">Divide</a></li>
				<li><a href="tt9_multi_shift.html">Multiply (shift)</a></li>
				<li><a href="tt9_divide_shift.html">Divide (shift)</a></li>
				<li><a href="tt9_aver.html">Average</a></li>
				<li><a href="tt9_subtract.html">2's Compliment</a></li>
				<li><a href="tt9_mem.html">Memory Cell</a></li>
				<li><a href="tt9_pascal.html">Pascal's Triangle</a></li>
				<li><a href="tt9_lang.html">Langton's Ant</a></li>
				<li><a href="tt9_rng.html">Random Number</a></li>
				<li><a href="tt7_digicomp.html">Digi-Comp</a></li>
				<li><a href="tt7_turing.html">Busy Beaver</a></li>
				<li><a href="tt7_turing_mc.html">Turing Machine</a></li>
				<li><strong><a href="tt3_univ.html">Computer</a></strong></li>
				<li><a href="tt3_ham.html">Hamming Weight</a></li>
				<li><a href="tt3_tri_basic.html">Triangular Seq</a></li>
				<li><a href="tt3_fibonacci.html">Fibonacci Seq</a></li>
				<!--<li><a href="../stagecast/trains/tu4_multiplier.html">Multiplier</a></li>-->
				<li><a href="tt3_syard.html">Switching Yard</a></li>
				<!--<li><strong>Info</strong></li>-->
				<!--<li><strong><a href="#.html">Info</a></strong></li>-->
				<li><strong><a href="tt8_info.html">Projects</a></strong></li>
				<li><a href="tt8_equiv.html">Equiv Circuits</a></li>
				<li><a href="tt8_auto_run.html">Auto Switching</a></li>
				<li><a href="tt8_duplo_lout.html">Duplo Layouts</a></li>
				<li><a href="tt8_duplo_comp.html">Duplo Computer</a></li>
				<li><a href="tt8_mech_logic.html">Mechanical Logic</a></li>
				<li><strong>&nbsp;</strong></li>
			</ul></td>
	</tr>
</table>
<table cellspacing="0" cellpadding="0" class="foot">
	<tr>
		<td class="main"><p>cr31.co.uk</p></td>
		<td class="side">&nbsp;</td>
	</tr>
</table>
<table cellspacing="0" cellpadding="0" class="base">
	<tr>
		<td class="main"><p> zoom in to enlarge layouts</p></td>
		<td class="side">&nbsp;</td>
	</tr>
</table>
</body>
<!-- InstanceEnd --></html>
